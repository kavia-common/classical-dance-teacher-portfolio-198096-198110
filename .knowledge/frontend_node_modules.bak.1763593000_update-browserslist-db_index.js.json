{"is_source_file": true, "format": "JavaScript", "description": "This source file is part of a Node.js module that manages the updating of the 'caniuse-lite' database used for browser compatibility data. It includes functions for detecting lockfiles, fetching latest version info, comparing browser lists, and updating lockfiles and dependencies accordingly. The main exported function handles the update process and reports browser target changes.", "external_files": ["child_process", "escalade/sync", "fs", "path", "./utils", "browserslist"], "external_methods": ["execSync", "existsSync", "readFileSync", "writeFileSync", "require"], "published": ["module.exports"], "classes": [{"name": "BrowserslistUpdateError", "description": "Custom error class for signaling errors during the update process related to environment detection and lockfile operations."}], "methods": [{"name": "detectLockfile()", "description": "Locates the project's package manager lockfile (npm, yarn, pnpm, bun) and determines its mode and version.", "scope": "", "scopeKind": ""}, {"name": "getLatestInfo(lock)", "description": "Fetches the latest caniuse-lite data based on the detected lockfile mode.", "scope": "", "scopeKind": ""}, {"name": "getBrowsers()", "description": "Retrieves the current list of target browsers from the 'browserslist' configuration.", "scope": "", "scopeKind": ""}, {"name": "diffBrowsers(old, current)", "description": "Compares old and new browser lists to determine added, removed, or unchanged browsers.", "scope": "", "scopeKind": ""}, {"name": "updateNpmLockfile(lock, latest)", "description": "Prepares an updated npm lockfile JSON object with new caniuse-lite version data.", "scope": "", "scopeKind": ""}, {"name": "deletePackage(node, metadata)", "description": "Recursively removes 'caniuse-lite' dependencies from the lockfile JSON structure.", "scope": "", "scopeKind": ""}, {"name": "updateYarnLockfile(lock, latest)", "description": "Updates yarn lockfile content with new caniuse-lite version data.", "scope": "", "scopeKind": ""}, {"name": "updateLockfile(lock, latest)", "description": "Handles updating the lockfile content depending on its mode (npm/yarn).", "scope": "", "scopeKind": ""}, {"name": "updatePackageManually(print, lock, latest)", "description": "Updates the lockfile and dependencies manually, including running update and uninstall commands.", "scope": "", "scopeKind": ""}, {"name": "updateWith(print, cmd)", "description": "Executes a shell command to update dependencies.", "scope": "", "scopeKind": ""}, {"name": "updateDB(print = defaultPrint)", "description": "Main exported function that orchestrates the update process for caniuse-lite and reports browser list changes.", "scope": "", "scopeKind": ""}, {"name": "defaultPrint(str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "exports(print = defaultPrint)", "scope": "module", "scopeKind": "function", "description": "unavailable"}], "calls": ["require('child_process').execSync", "require('escalade/sync')", "require('fs').existsSync", "require('fs').readFileSync", "require('fs').writeFileSync", "require('path').join", "require('./utils').detectEOL", "require('./utils').detectIndent", "require('browserslist')", "execSync", "existsSync", "readFileSync", "writeFileSync"], "search-terms": ["update-browserslist-db", "detectLockfile", "getLatestInfo", "browserslist", "caniuse-lite", "lockfile", "update dependencies", "browser list comparison"], "state": 2, "file_id": 144, "knowledge_revision": 1395, "git_revision": "ad1ff1730cf5ffe637ecd6d8ab4d3ac026be63d5", "ctags": [{"_type": "tag", "name": "BrowserslistUpdateError", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^function BrowserslistUpdateError(message) {$/", "language": "JavaScript", "kind": "class", "signature": "(message)"}, {"_type": "tag", "name": "defaultPrint", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^function defaultPrint(str) {$/", "language": "JavaScript", "kind": "function", "signature": "(str)"}, {"_type": "tag", "name": "deletePackage", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^function deletePackage(node, metadata) {$/", "language": "JavaScript", "kind": "function", "signature": "(node, metadata)"}, {"_type": "tag", "name": "detectLockfile", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^function detectLockfile() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "diffBrowsers", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^function diffBrowsers(old, current) {$/", "language": "JavaScript", "kind": "function", "signature": "(old, current)"}, {"_type": "tag", "name": "escalade", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^let escalade = require('escalade\\/sync')$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "exports", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^module.exports = function updateDB(print = defaultPrint) {$/", "language": "JavaScript", "kind": "function", "signature": "(print = defaultPrint)", "scope": "module", "scopeKind": "function"}, {"_type": "tag", "name": "file", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^    let lock = { file: lockfileYarn, mode: 'yarn' }$/", "language": "JavaScript", "kind": "property", "scope": "detectLockfile.lock", "scopeKind": "class"}, {"_type": "tag", "name": "getBrowsers", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^function getBrowsers() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getLatestInfo", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^function getLatestInfo(lock) {$/", "language": "JavaScript", "kind": "function", "signature": "(lock)"}, {"_type": "tag", "name": "latest", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^  let metadata = { latest, versions: [] }$/", "language": "JavaScript", "kind": "field", "scope": "updateNpmLockfile.metadata", "scopeKind": "class"}, {"_type": "tag", "name": "lock", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^    let lock = { file: lockfileYarn, mode: 'yarn' }$/", "language": "JavaScript", "kind": "class", "scope": "detectLockfile", "scopeKind": "class"}, {"_type": "tag", "name": "mode", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^    let lock = { file: lockfileYarn, mode: 'yarn' }$/", "language": "JavaScript", "kind": "property", "scope": "detectLockfile.lock", "scopeKind": "class"}, {"_type": "tag", "name": "pico", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^let pico = require('picocolors')$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "updateDB", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^module.exports = function updateDB(print = defaultPrint) {$/", "language": "JavaScript", "kind": "function", "signature": "(print = defaultPrint)"}, {"_type": "tag", "name": "updateLockfile", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^function updateLockfile(lock, latest) {$/", "language": "JavaScript", "kind": "function", "signature": "(lock, latest)"}, {"_type": "tag", "name": "updateNpmLockfile", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^function updateNpmLockfile(lock, latest) {$/", "language": "JavaScript", "kind": "function", "signature": "(lock, latest)"}, {"_type": "tag", "name": "updatePackageManually", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^function updatePackageManually(print, lock, latest) {$/", "language": "JavaScript", "kind": "function", "signature": "(print, lock, latest)"}, {"_type": "tag", "name": "updateWith", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^function updateWith(print, cmd) {$/", "language": "JavaScript", "kind": "function", "signature": "(print, cmd)"}, {"_type": "tag", "name": "updateYarnLockfile", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^function updateYarnLockfile(lock, latest) {$/", "language": "JavaScript", "kind": "function", "signature": "(lock, latest)"}, {"_type": "tag", "name": "yarnCommand", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^const yarnCommand = IsHadoopExists ? 'yarnpkg' : 'yarn'$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "yarnVersionRe", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^let yarnVersionRe = \\/version \"(.*?)\"\\/$/", "language": "JavaScript", "kind": "variable"}], "hash": "609d0887397f0506f64422c563d4be7e", "format-version": 4, "code-base-name": "frontend", "filename": "frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "fields": [{"name": "let escalade = require('escalade\\/sync')", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let lock = { file: lockfileYarn, mode: 'yarn' }", "scope": "detectLockfile.lock", "scopeKind": "class", "description": "unavailable"}, {"name": "let metadata = { latest, versions: [] }", "scope": "updateNpmLockfile.metadata", "scopeKind": "class", "description": "unavailable"}, {"name": "let pico = require('picocolors')", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let yarnVersionRe = \\/version \"(.*?)\"\\/", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"1395": "ad1ff1730cf5ffe637ecd6d8ab4d3ac026be63d5"}]}