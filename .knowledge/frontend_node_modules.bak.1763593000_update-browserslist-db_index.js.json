{"is_source_file": true, "format": "JavaScript", "description": "This file is a Node.js module script for updating the 'caniuse-lite' data within a JavaScript project. It interacts with package managers like npm, yarn, pnpm, and bun to identify lock files, fetch latest browser data, compare versions, and perform updates. It also includes functions to detect the environment, handle errors, and report browser list differences.", "external_files": ["child_process", "escalade/sync", "fs", "path", "./utils", "browserslist"], "external_methods": ["execSync", "existsSync", "readFileSync", "writeFileSync", "join", "detectEOL", "detectIndent", "require", "Error.captureStackTrace"], "published": ["updateDB"], "classes": [{"name": "BrowserslistUpdateError", "description": "Custom Error class for handling errors during the update process, specifically related to locating or updating browser list dependencies."}], "methods": [{"name": "detectLockfile()", "description": "Detects and returns information about the package lock file in the project directory, such as 'package-lock.json', 'yarn.lock', 'pnpm-lock.yaml', or 'bun.lock'.", "scope": "", "scopeKind": ""}, {"name": "getLatestInfo(lock)", "description": "Fetches the latest caniuse-lite data based on the package manager lock file detected.", "scope": "", "scopeKind": ""}, {"name": "getBrowsers()", "description": "Retrieves the current list of target browsers configured in the project.", "scope": "", "scopeKind": ""}, {"name": "diffBrowsers(old, current)", "description": "Computes the differences between old and new browser lists, highlighting additions and removals.", "scope": "", "scopeKind": ""}, {"name": "updateNpmLockfile(lock, latest)", "description": "Updates the npm lockfile object with new caniuse-lite version info.", "scope": "", "scopeKind": ""}, {"name": "deletePackage(node, metadata)", "description": "Removes caniuse-lite dependencies from package dependency trees.", "scope": "", "scopeKind": ""}, {"name": "updateYarnLockfile(lock, latest)", "description": "Updates the yarn lockfile content to reflect a new caniuse-lite version.", "scope": "", "scopeKind": ""}, {"name": "updateLockfile(lock, latest)", "description": "General function to update lockfile content based on the package manager.", "scope": "", "scopeKind": ""}, {"name": "updatePackageManually(print, lock, latest)", "description": "Handles the process of manually updating the lockfile and dependencies, including running install commands.", "scope": "", "scopeKind": ""}, {"name": "updateWith(print, cmd)", "description": "Executes update commands for package managers like yarn, bun, or pnpm.", "scope": "", "scopeKind": ""}, {"name": "updateDB(print = defaultPrint)", "description": "Primary exported function that orchestrates the update process for caniuse-lite, including detecting the lockfile, fetching latest data, updating dependencies, and reporting browser list changes.", "scope": "", "scopeKind": ""}, {"name": "defaultPrint(str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "exports(print = defaultPrint)", "scope": "module", "scopeKind": "function", "description": "unavailable"}], "calls": ["execSync", "existsSync", "readFileSync", "writeFileSync", "require", "detectEOL", "detectIndent"], "search-terms": ["update-browserslist-db", "caniuse-lite", "lockfile", "npm", "yarn", "pnpm", "bun", "browser list", "package-lock", "lockfile detection", "browser updates", "dependency update"], "state": 2, "file_id": 208, "knowledge_revision": 1444, "git_revision": "ad1ff1730cf5ffe637ecd6d8ab4d3ac026be63d5", "ctags": [{"_type": "tag", "name": "BrowserslistUpdateError", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^function BrowserslistUpdateError(message) {$/", "language": "JavaScript", "kind": "class", "signature": "(message)"}, {"_type": "tag", "name": "defaultPrint", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^function defaultPrint(str) {$/", "language": "JavaScript", "kind": "function", "signature": "(str)"}, {"_type": "tag", "name": "deletePackage", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^function deletePackage(node, metadata) {$/", "language": "JavaScript", "kind": "function", "signature": "(node, metadata)"}, {"_type": "tag", "name": "detectLockfile", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^function detectLockfile() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "diffBrowsers", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^function diffBrowsers(old, current) {$/", "language": "JavaScript", "kind": "function", "signature": "(old, current)"}, {"_type": "tag", "name": "escalade", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^let escalade = require('escalade\\/sync')$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "exports", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^module.exports = function updateDB(print = defaultPrint) {$/", "language": "JavaScript", "kind": "function", "signature": "(print = defaultPrint)", "scope": "module", "scopeKind": "function"}, {"_type": "tag", "name": "file", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^    let lock = { file: lockfileYarn, mode: 'yarn' }$/", "language": "JavaScript", "kind": "property", "scope": "detectLockfile.lock", "scopeKind": "class"}, {"_type": "tag", "name": "getBrowsers", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^function getBrowsers() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getLatestInfo", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^function getLatestInfo(lock) {$/", "language": "JavaScript", "kind": "function", "signature": "(lock)"}, {"_type": "tag", "name": "latest", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^  let metadata = { latest, versions: [] }$/", "language": "JavaScript", "kind": "field", "scope": "updateNpmLockfile.metadata", "scopeKind": "class"}, {"_type": "tag", "name": "lock", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^    let lock = { file: lockfileYarn, mode: 'yarn' }$/", "language": "JavaScript", "kind": "class", "scope": "detectLockfile", "scopeKind": "class"}, {"_type": "tag", "name": "mode", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^    let lock = { file: lockfileYarn, mode: 'yarn' }$/", "language": "JavaScript", "kind": "property", "scope": "detectLockfile.lock", "scopeKind": "class"}, {"_type": "tag", "name": "pico", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^let pico = require('picocolors')$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "updateDB", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^module.exports = function updateDB(print = defaultPrint) {$/", "language": "JavaScript", "kind": "function", "signature": "(print = defaultPrint)"}, {"_type": "tag", "name": "updateLockfile", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^function updateLockfile(lock, latest) {$/", "language": "JavaScript", "kind": "function", "signature": "(lock, latest)"}, {"_type": "tag", "name": "updateNpmLockfile", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^function updateNpmLockfile(lock, latest) {$/", "language": "JavaScript", "kind": "function", "signature": "(lock, latest)"}, {"_type": "tag", "name": "updatePackageManually", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^function updatePackageManually(print, lock, latest) {$/", "language": "JavaScript", "kind": "function", "signature": "(print, lock, latest)"}, {"_type": "tag", "name": "updateWith", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^function updateWith(print, cmd) {$/", "language": "JavaScript", "kind": "function", "signature": "(print, cmd)"}, {"_type": "tag", "name": "updateYarnLockfile", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^function updateYarnLockfile(lock, latest) {$/", "language": "JavaScript", "kind": "function", "signature": "(lock, latest)"}, {"_type": "tag", "name": "yarnCommand", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^const yarnCommand = IsHadoopExists ? 'yarnpkg' : 'yarn'$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "yarnVersionRe", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "pattern": "/^let yarnVersionRe = \\/version \"(.*?)\"\\/$/", "language": "JavaScript", "kind": "variable"}], "hash": "609d0887397f0506f64422c563d4be7e", "format-version": 4, "code-base-name": "frontend", "filename": "frontend/node_modules.bak.1763593000/update-browserslist-db/index.js", "fields": [{"name": "let escalade = require('escalade\\/sync')", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let lock = { file: lockfileYarn, mode: 'yarn' }", "scope": "detectLockfile.lock", "scopeKind": "class", "description": "unavailable"}, {"name": "let metadata = { latest, versions: [] }", "scope": "updateNpmLockfile.metadata", "scopeKind": "class", "description": "unavailable"}, {"name": "let pico = require('picocolors')", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let yarnVersionRe = \\/version \"(.*?)\"\\/", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"1444": "ad1ff1730cf5ffe637ecd6d8ab4d3ac026be63d5"}]}