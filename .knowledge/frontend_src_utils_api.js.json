{"is_source_file": true, "format": "JavaScript", "description": "This file provides utility functions for API communication, token management, and UX interactions within a frontend application, specifically designed for an admin interface. It includes functions for making HTTP requests with authentication, handling local storage tokens, displaying toast notifications, and confirming user actions.", "external_files": ["none explicitly imported or imported via module system; relies on browser APIs such as fetch, localStorage, CustomEvent, window.confirm"], "external_methods": ["fetch", "localStorage.getItem", "localStorage.setItem", "localStorage.removeItem", "window.dispatchEvent", "window.confirm"], "published": ["getAdminToken", "setAdminToken", "buildHeaders", "showToast", "confirmAction", "apiRequest", "apiFetch"], "classes": [], "methods": [{"name": "getAdminToken()", "description": "Retrieves the admin token from localStorage, returning an empty string if unavailable or an error occurs.", "scope": "", "scopeKind": ""}, {"name": "setAdminToken(token)", "description": "Stores or removes the admin token in localStorage based on the provided token value.", "scope": "", "scopeKind": ""}, {"name": "buildHeaders(extra = {}, includeJson = true, withAuth = true)", "description": "Constructs request headers, including JSON content type and authorization if applicable, merging with extra headers.", "scope": "", "scopeKind": ""}, {"name": "showToast(message, type = 'info')", "description": "Dispatches a custom event to display a toast notification with specified message and type.", "scope": "", "scopeKind": ""}, {"name": "confirmAction(message = 'Are you sure?')", "description": "Asynchronously prompts the user for confirmation, wrapping window.confirm for future customization.", "scope": "", "scopeKind": ""}, {"name": "apiRequest(path, { method = 'GET', headers = {}, body, isAdmin = false } = {})", "description": "Performs a fetch API call with support for authorization, JSON serialization, error handling, and response parsing.", "scope": "", "scopeKind": ""}, {"name": "apiFetch(path, options = {})", "description": "An alias for apiRequest, currently passing through; potentially for URL normalization.", "scope": "", "scopeKind": ""}], "calls": ["localStorage.getItem", "localStorage.setItem", "localStorage.removeItem", "window.dispatchEvent", "window.confirm", "fetch"], "search-terms": ["apiRequest", "admin_token", "buildHeaders", "showToast", "confirmAction", "apiFetch", "frontend utils", "backend communication", "auth token management"], "state": 2, "file_id": 1168, "knowledge_revision": 2466, "git_revision": "c3b8d947393fb4aa89bcbdc4c5e59031c4a8e235", "revision_history": [{"2394": ""}, {"2412": "213c8e175856d29f78f50fc8e3a4278d72f3c404"}, {"2459": "1d03b97065cafdb66b44a56fa1c56561b4534d17"}, {"2460": "e22b142fa8cc891e0d0485b6b0ad165d2f9c7b2b"}, {"2461": "1aeee9b0d6561595d44bcf819c5a90a74ac450bf"}, {"2466": "c3b8d947393fb4aa89bcbdc4c5e59031c4a8e235"}], "ctags": [{"_type": "tag", "name": "Accept", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/src/utils/api.js", "pattern": "/^    Accept: 'application\\/json',$/", "language": "JavaScript", "kind": "property", "scope": "apiRequest.baseHeaders", "scopeKind": "class"}, {"_type": "tag", "name": "apiFetch", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/src/utils/api.js", "pattern": "/^export async function apiFetch(path, options = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, options = {})"}, {"_type": "tag", "name": "apiRequest", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/src/utils/api.js", "pattern": "/^export async function apiRequest(path, { method = 'GET', headers = {}, body, isAdmin = false } =/", "language": "JavaScript", "kind": "function", "signature": "(path, { method = 'GET', headers = {}, body, isAdmin = false } = {})"}, {"_type": "tag", "name": "baseHeaders", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/src/utils/api.js", "pattern": "/^  const baseHeaders = {$/", "language": "JavaScript", "kind": "class", "scope": "apiRequest", "scopeKind": "class"}, {"_type": "tag", "name": "buildHeaders", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/src/utils/api.js", "pattern": "/^export function buildHeaders(extra = {}, includeJson = true, withAuth = true) {$/", "language": "JavaScript", "kind": "function", "signature": "(extra = {}, includeJson = true, withAuth = true)"}, {"_type": "tag", "name": "confirmAction", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/src/utils/api.js", "pattern": "/^export async function confirmAction(message = 'Are you sure?') {$/", "language": "JavaScript", "kind": "function", "signature": "(message = 'Are you sure?')"}, {"_type": "tag", "name": "getAdminToken", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/src/utils/api.js", "pattern": "/^export function getAdminToken() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "setAdminToken", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/src/utils/api.js", "pattern": "/^export function setAdminToken(token) {$/", "language": "JavaScript", "kind": "function", "signature": "(token)"}, {"_type": "tag", "name": "showToast", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/src/utils/api.js", "pattern": "/^export function showToast(message, type = 'info') {$/", "language": "JavaScript", "kind": "function", "signature": "(message, type = 'info')"}], "hash": "9d17430f0ae0a69c7a472ebbf06cb734", "format-version": 4, "code-base-name": "frontend", "filename": "frontend/src/utils/api.js", "fields": [{"name": "Accept: 'application\\/json',", "scope": "apiRequest.baseHeaders", "scopeKind": "class", "description": "unavailable"}]}