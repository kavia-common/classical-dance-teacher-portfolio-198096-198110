{"is_source_file": true, "format": "JavaScript", "description": "This file provides utility functions for API communication, token management, UI notifications, and user confirmations within a React application. It handles API base URL resolution, fetch requests with JSON parsing and error handling, token storage and retrieval, header construction, toast notifications, and confirmation dialogs.", "external_files": ["fetch API (built-in browser API)"], "external_methods": ["fetch", "localStorage.getItem", "localStorage.setItem", "localStorage.removeItem", "JSON.parse", "window.dispatchEvent", "window.confirm"], "published": ["getApiBase", "apiFetch", "getAdminToken", "setAdminToken", "buildHeaders", "showToast", "confirmAction"], "classes": [], "methods": [{"name": "getApiBase()", "description": "Constructs and returns the API base URL based on environment variables and window properties, ensuring normalization by removing trailing slashes.", "scope": "", "scopeKind": ""}, {"name": "apiFetch(path, options = {})", "description": "Performs a fetch request to the constructed URL based on provided path and options, handles JSON and text responses, and throws detailed errors on non-2xx responses.", "scope": "", "scopeKind": ""}, {"name": "getAdminToken()", "description": "Retrieves the admin token from localStorage if available.", "scope": "", "scopeKind": ""}, {"name": "setAdminToken(token)", "description": "Stores or removes the admin token in localStorage based on the provided token value.", "scope": "", "scopeKind": ""}, {"name": "buildHeaders(base = {}, includeContentType = true)", "description": "Creates headers object for authenticated requests, optionally including Content-Type and Authorization with the stored admin token.", "scope": "", "scopeKind": ""}, {"name": "showToast(message, type = 'info')", "description": "Triggers a global toast notification by dispatching a custom event with message and type.", "scope": "", "scopeKind": ""}, {"name": "confirmAction(message = 'Are you sure?')", "description": "Displays a native confirmation dialog and returns a Promise resolving to the user's response.", "scope": "", "scopeKind": ""}], "calls": ["fetch", "localStorage.getItem", "localStorage.setItem", "localStorage.removeItem", "JSON.parse", "window.dispatchEvent", "window.confirm"], "search-terms": ["apiFetch wrapper", "API base URL resolution", "admin token localStorage", "toast notifications", "confirmation dialog", "fetch error handling"], "state": 2, "file_id": 1168, "knowledge_revision": 2460, "git_revision": "e22b142fa8cc891e0d0485b6b0ad165d2f9c7b2b", "revision_history": [{"2394": ""}, {"2412": "213c8e175856d29f78f50fc8e3a4278d72f3c404"}, {"2459": "1d03b97065cafdb66b44a56fa1c56561b4534d17"}, {"2460": "e22b142fa8cc891e0d0485b6b0ad165d2f9c7b2b"}], "ctags": [{"_type": "tag", "name": "Accept", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/src/utils/api.js", "pattern": "/^      Accept: 'application\\/json',$/", "language": "JavaScript", "kind": "property", "scope": "apiFetch.init.headers", "scopeKind": "class"}, {"_type": "tag", "name": "Content-Type", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/src/utils/api.js", "pattern": "/^      'Content-Type': 'application\\/json',$/", "language": "JavaScript", "kind": "property", "scope": "apiFetch.init.headers", "scopeKind": "class"}, {"_type": "tag", "name": "apiFetch", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/src/utils/api.js", "pattern": "/^export async function apiFetch(path, options = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, options = {})"}, {"_type": "tag", "name": "body", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/src/utils/api.js", "pattern": "/^    body:$/", "language": "JavaScript", "kind": "property", "scope": "apiFetch.init", "scopeKind": "class"}, {"_type": "tag", "name": "buildHeaders", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/src/utils/api.js", "pattern": "/^export function buildHeaders(base = {}, includeContentType = true) {$/", "language": "JavaScript", "kind": "function", "signature": "(base = {}, includeContentType = true)"}, {"_type": "tag", "name": "confirmAction", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/src/utils/api.js", "pattern": "/^export function confirmAction(message = 'Are you sure?') {$/", "language": "JavaScript", "kind": "function", "signature": "(message = 'Are you sure?')"}, {"_type": "tag", "name": "credentials", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/src/utils/api.js", "pattern": "/^    credentials: options.credentials || 'include',$/", "language": "JavaScript", "kind": "property", "scope": "apiFetch.init", "scopeKind": "class"}, {"_type": "tag", "name": "getAdminToken", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/src/utils/api.js", "pattern": "/^export function getAdminToken() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getApiBase", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/src/utils/api.js", "pattern": "/^export function getApiBase() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/src/utils/api.js", "pattern": "/^    headers: {$/", "language": "JavaScript", "kind": "class", "scope": "apiFetch.init", "scopeKind": "class"}, {"_type": "tag", "name": "init", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/src/utils/api.js", "pattern": "/^  const init = {$/", "language": "JavaScript", "kind": "class", "scope": "apiFetch", "scopeKind": "class"}, {"_type": "tag", "name": "method", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/src/utils/api.js", "pattern": "/^    method: options.method || 'GET',$/", "language": "JavaScript", "kind": "property", "scope": "apiFetch.init", "scopeKind": "class"}, {"_type": "tag", "name": "mode", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/src/utils/api.js", "pattern": "/^    mode: options.mode || 'cors',$/", "language": "JavaScript", "kind": "property", "scope": "apiFetch.init", "scopeKind": "class"}, {"_type": "tag", "name": "setAdminToken", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/src/utils/api.js", "pattern": "/^export function setAdminToken(token) {$/", "language": "JavaScript", "kind": "function", "signature": "(token)"}, {"_type": "tag", "name": "showToast", "path": "/home/kavia/workspace/code-generation/classical-dance-teacher-portfolio-198096-198110/frontend/src/utils/api.js", "pattern": "/^export function showToast(message, type = 'info') {$/", "language": "JavaScript", "kind": "function", "signature": "(message, type = 'info')"}], "hash": "17690b818465447d7f88da570f8035db", "format-version": 4, "code-base-name": "frontend", "filename": "frontend/src/utils/api.js", "fields": [{"name": "Accept: 'application\\/json',", "scope": "apiFetch.init.headers", "scopeKind": "class", "description": "unavailable"}, {"name": "'Content-Type': 'application\\/json',", "scope": "apiFetch.init.headers", "scopeKind": "class", "description": "unavailable"}, {"name": "body:", "scope": "apiFetch.init", "scopeKind": "class", "description": "unavailable"}, {"name": "credentials: options.credentials || 'include',", "scope": "apiFetch.init", "scopeKind": "class", "description": "unavailable"}, {"name": "method: options.method || 'GET',", "scope": "apiFetch.init", "scopeKind": "class", "description": "unavailable"}, {"name": "mode: options.mode || 'cors',", "scope": "apiFetch.init", "scopeKind": "class", "description": "unavailable"}]}